---
import { Image } from '@astrojs/image/components';

import { Badge } from '@/components/ui/badge';
import { PROJECTS } from '@/constants';
---

<section id="projects" class="px-4 lg:px-0 py-8">
  <h1 class="text-2xl font-medium">Projects</h1>
  <p class="text-muted-foreground text-sm">
    A list of projects I've worked on.
  </p>
  {
    PROJECTS.map(({ name, description, stacks, url, imageUrl }) => (
      <div class:list={['group relative grid grid-cols-4 gap-0 mt:gap-4 mt-2']}>
        <div class="col-span-4 sm:col-span-1 p-2">
          {imageUrl ? (
            <Image
              src={imageUrl}
              alt={`screenshot of ${name}`}
              class="rounded-lg h-full w-full"
              loading="lazy"
              width={600}
              height={450}
            />
          ) : (
            <div class="bg-foreground/20 text-foreground select-none dark:bg-foreground/80 dark:text-background h-16 rounded-lg grid place-items-center w-full sm:h-full">
              {name}
            </div>
          )}
        </div>
        <div class="col-span-4 sm:col-span-3 p-2">
          <div class="flex gap-1 items-center">
            <a
              href={url}
              target="_blank"
              rel="noopener noreferrer"
              class:list={[
                'duration-200 group/link text-xl font-semibold',
                url ? 'hover:text-primary' : 'cursor-not-allowed',
              ]}
              aria-label={`Visit ${name} website`}
            >
              {name}
            </a>
          </div>
          <p class="text-muted-foreground text-sm mt-1">{description}</p>
          <div class="flex w-full flex-wrap mt-2 gap-2">
            {stacks.map((stack) => (
              <Badge variant="secondary">{stack}</Badge>
            ))}
          </div>
        </div>
      </div>
    ))
  }
</section>
